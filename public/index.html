<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Friends Voice Chat</title>
<script src="https://cdn.socket.io/4.7.1/socket.io.min.js"></script>
<style>
* {margin: 0; padding: 0; box-sizing: border-box;}
body {font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #fff; color: #333;}
#app {display: flex; height: 100vh;}
#sidebar {width: 300px; background: #f5f5f5; border-right: 1px solid #ddd; padding: 20px; overflow-y: auto;}
#main {flex: 1; display: flex; flex-direction: column;}
#messages {flex: 1; overflow-y: auto; padding: 20px;}
.message {margin: 10px 0; padding: 10px; border-left: 3px solid #007bff; background: #f9f9f9; border-radius: 4px;}
#input-area {padding: 20px; border-top: 1px solid #ddd; display: flex; gap: 10px;}
input, button {padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;}
input {flex: 1;}
button {background: #007bff; color: white; border: none; cursor: pointer;}
button:hover {background: #0056b3;}
#online-users {margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd;}
.user {padding: 8px; margin: 5px 0; background: white; border-radius: 4px; cursor: pointer; border: 1px solid #ddd;}
.user:hover {background: #f0f0f0;}
h3 {margin-bottom: 10px; font-size: 14px; color: #666;}
input[type="text"] {padding: 12px;}
</style>
</head>
<body>
<div id="app">
<div id="sidebar">
<input type="text" id="username" placeholder="Введите имя" />
<button onclick="joinChat()">Войти</button>
<div id="online-users"><h3>Онлайн</h3></div>
</div>
<div id="main">
<div id="messages"></div>
<div id="input-area">
<input type="text" id="message-input" placeholder="Напишите сообщение..." />
<button onclick="sendMessage()">Отправить</button>
</div>
</div>
</div>
<script>
const socket = io();
let myUsername = '';
function joinChat() {
const name = document.getElementById('username').value.trim();
if (name) { myUsername = name; socket.emit('userJoined', { name }); }
}
function sendMessage() {
const msg = document.getElementById('message-input').value.trim();
if (msg) { socket.emit('message', { text: msg }); document.getElementById('message-input').value = ''; }
}
socket.on('onlineUsers', (users) => {
const container = document.querySelector('#online-users');
let html = '<h3>Онлайн</h3>';
Object.values(users).forEach(u => { html += `<div class="user">${u.name}</div>`; });
container.innerHTML = html;
});
socket.on('message', (data) => {
const div = document.createElement('div');
div.className = 'message';
div.innerHTML = `<strong>${data.senderName}:</strong> ${data.text}`;
document.getElementById('messages').appendChild(div);
});
</script>
</body>
</html>
